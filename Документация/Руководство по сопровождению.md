# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—é
## –õ–æ–∫–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞:** 2026  
**–ê–≤—Ç–æ—Ä:** –ú–∞–ª–∏–Ω–µ–≤—Å–∫–∏–π –ï–≥–æ—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á/21–ò–°-24

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [–ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è](#–ø—Ä–æ—Ü–µ–¥—É—Ä—ã-—Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è)
4. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
5. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ](#—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)
6. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
7. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
8. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
9. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã)
10. [–ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-—Å–∫—Ä–∏–ø—Ç—ã)
11. [–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏](#–∫–æ–Ω—Ç–∞–∫—Ç—ã-–¥–ª—è-–ø–æ–¥–¥–µ—Ä–∂–∫–∏)

---

<a name="–≤–≤–µ–¥–µ–Ω–∏–µ"></a>
## 1. –í–≤–µ–¥–µ–Ω–∏–µ

### 1.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—é –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –æ—Ç–≤–µ—á–∞—é—â–∏—Ö –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã "–õ–æ–∫–∞–ª—å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä". –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ:

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1.2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–î–æ–∫—É–º–µ–Ω—Ç –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π | –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ |
|-----------|---------------|------------------|
| –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ |
| –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –ü–æ –∑–∞–ø—Ä–æ—Å—É |
| –°–µ—Ç–µ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | –°–µ—Ç–µ–≤–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |

### 1.3. –¢–µ—Ä–º–∏–Ω—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

| –¢–µ—Ä–º–∏–Ω | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
|--------|-------------|
| **–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ** | –ö–æ–º–ø–ª–µ–∫—Å —Ä–∞–±–æ—Ç –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã |
| **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** | –ü—Ä–æ—Ü–µ—Å—Å –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π |
| **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–π –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã |

### 1.4. –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ú–∏–Ω–∏–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
|------------|---------|---------------|
| –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å Linux/Windows | –ë–∞–∑–æ–≤—ã–π | –°—Ä–µ–¥–Ω–∏–π |
| –ó–Ω–∞–Ω–∏–µ Python | –ë–∞–∑–æ–≤—ã–π | –°—Ä–µ–¥–Ω–∏–π |
| –ó–Ω–∞–Ω–∏–µ SQL | –ë–∞–∑–æ–≤—ã–π | –ë–∞–∑–æ–≤—ã–π |
| –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π | –ë–∞–∑–æ–≤—ã–π | –°—Ä–µ–¥–Ω–∏–π |
| –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É | SSH/RDP | SSH —Å –∫–ª—é—á–∞–º–∏ |

---

<a name="–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã"></a>
## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 2.1. –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å                       ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   –ö–ª–∏–µ–Ω—Ç   ‚îÇ      ‚îÇ   –ö–ª–∏–µ–Ω—Ç   ‚îÇ     ‚îÇ   –ö–ª–∏–µ–Ω—Ç   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Windows   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Linux    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    Mac     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ           ‚îÇ                  ‚îÇ                  ‚îÇ       ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                              ‚îÇ                          ‚îÇ
‚îÇ                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ                     ‚îÇ     –°–µ—Ä–≤–µ—Ä      ‚îÇ                 ‚îÇ
‚îÇ                     ‚îÇ  (Linux/Windows)‚îÇ                 ‚îÇ
‚îÇ                     ‚îÇ  FastAPI + SQLite‚îÇ                ‚îÇ
‚îÇ                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------------|--------------|-------------|
| **FastAPI —Å–µ—Ä–≤–µ—Ä** | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ | `messenger/server/` | –í—ã—Å–æ–∫–∞—è |
| **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | `messenger/server/messenger.db` | –í—ã—Å–æ–∫–∞—è |
| **WebSocket —Å–µ—Ä–≤–µ—Ä** | Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | `messenger/server/` | –í—ã—Å–æ–∫–∞—è |
| **–ö–ª–∏–µ–Ω—Ç PyQt5** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | `messenger/client/` | –°—Ä–µ–¥–Ω—è—è |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã | `messenger/client/config.py` | –°—Ä–µ–¥–Ω—è—è |

### 2.3. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ö–ª–∏–µ–Ω—Ç ‚Üí REST API ‚Üí FastAPI ‚Üí SQLite
         ‚Üë         ‚Üì          ‚Üë         ‚Üì
         ‚îî‚îÄ‚îÄ WebSocket ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ WebSocket
```

---

<a name="–ø—Ä–æ—Ü–µ–¥—É—Ä—ã-—Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è"></a>
## 3. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è

### 3.1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### 3.1.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /–ø—É—Ç—å/–∫/messenger/server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep python
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ—Ü–µ—Å—Å main.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–∞
netstat -tuln | grep 8000
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: LISTEN –Ω–∞ –ø–æ—Ä—Ç—É 8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
tail -n 50 server.log
```

#### 3.1.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
ls -lh messenger.db
# –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: –¥–æ 100 –ú–ë

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sqlite3 messenger.db "PRAGMA integrity_check;"
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ok

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
sqlite3 messenger.db "SELECT COUNT(*) FROM users;"
sqlite3 messenger.db "SELECT COUNT(*) FROM messages;"
```

### 3.2. –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### 3.2.1. –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find /–ø—É—Ç—å/–∫/messenger -name "*.log" -mtime +30 -delete

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Python
find /–ø—É—Ç—å/–∫/messenger -name "__pycache__" -type d -exec rm -rf {} +
```

#### 3.2.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
df -h /–ø—É—Ç—å/–∫/messenger

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–º
ps aux | grep python | grep -v grep | awk '{print $4}'
```

### 3.3. –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### 3.3.1. –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
sqlite3 messenger.db << EOF
SELECT 
    strftime('%Y-%m', created_at) as month,
    COUNT(*) as new_users,
    SUM(CASE WHEN last_login > datetime('now', '-30 days') THEN 1 ELSE 0 END) as active_users
FROM users
GROUP BY month
ORDER BY month DESC
LIMIT 6;
EOF

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
sqlite3 messenger.db << EOF
SELECT 
    strftime('%Y-%m', timestamp) as month,
    COUNT(*) as total_messages,
    COUNT(DISTINCT sender_id) as active_senders
FROM messages
GROUP BY month
ORDER BY month DESC
LIMIT 6;
EOF
```

#### 3.3.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip
python -m pip install --upgrade pip

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
pip list --outdated

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
pip install --upgrade fastapi uvicorn sqlalchemy
```

---

<a name="–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"></a>
## 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 4.1. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ |
|---------|---------------------|----------------------|----------------------|
| **–ó–∞–≥—Ä—É–∑–∫–∞ CPU —Å–µ—Ä–≤–µ—Ä–∞** | < 70% | > 90% | `top -bn1 | grep "Cpu(s)"` |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** | < 80% | > 95% | `free -m` |
| **–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ** | > 20% | < 10% | `df -h` |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** | < 100 | > 200 | `netstat -an | grep :8000 | wc -l` |
| **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API** | < 500 –º—Å | > 2000 –º—Å | `curl -w "%{time_total}" -o /dev/null -s http://localhost:8000/` |

### 4.2. –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

#### 4.2.1. –§–∞–π–ª—ã –ª–æ–≥–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª –ª–æ–≥–∞ | –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ | –†–æ—Ç–∞—Ü–∏—è |
|-----------|-----------|---------------------|---------|
| **–°–µ—Ä–≤–µ—Ä FastAPI** | `server.log` | INFO | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |
| **–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞** | `error.log` | ERROR | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |
| **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** | `websocket.log` | INFO | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ |
| **–î–æ—Å—Ç—É–ø –∫ –ë–î** | `database.log` | WARNING | –ï–∂–µ–º–µ—Å—è—á–Ω–æ |

#### 4.2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–æ–≤, –∏–∑–º–µ–Ω–∏—Ç–µ server/main.py:
import logging

logging.basicConfig(
    level=logging.DEBUG,  # –ò–∑–º–µ–Ω–∏—Ç–µ —Å INFO –Ω–∞ DEBUG
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('server_debug.log'),
        logging.StreamHandler()
    ]
)
```

### 4.3. –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### 4.3.1. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è (health_check.sh)

```bash
#!/bin/bash
# health_check.sh
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

LOG_FILE="/–ø—É—Ç—å/–∫/messenger/health_check.log"
SERVER_URL="http://localhost:8000/health"

echo "=== Health Check $(date) ===" >> $LOG_FILE

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
if curl -s --head --request GET $SERVER_URL | grep "200 OK" > /dev/null; then
    echo "‚úì –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω" >> $LOG_FILE
else
    echo "‚úó –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" >> $LOG_FILE
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    echo "–°–µ—Ä–≤–µ—Ä –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!" | mail -s "ALERT: Messenger Down" admin@example.com
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DB_SIZE=$(ls -lh /–ø—É—Ç—å/–∫/messenger/server/messenger.db | awk '{print $5}')
echo "–†–∞–∑–º–µ—Ä –ë–î: $DB_SIZE" >> $LOG_FILE

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
DISK_USAGE=$(df -h /–ø—É—Ç—å/–∫/messenger | tail -1 | awk '{print $5}')
echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞: $DISK_USAGE" >> $LOG_FILE

echo "=== End Check ===" >> $LOG_FILE
```

#### 4.3.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
crontab -e

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
*/5 * * * * /–ø—É—Ç—å/–∫/messenger/health_check.sh

# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –≤ 8:00
0 8 * * * /–ø—É—Ç—å/–∫/messenger/daily_report.sh
```

---

<a name="—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"></a>
## 5. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### 5.1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```
–ü–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:00
–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ: –ö–∞–∂–¥—ã–π —á–∞—Å
–•—Ä–∞–Ω–µ–Ω–∏–µ: 7 –¥–Ω–µ–π –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö, 4 –Ω–µ–¥–µ–ª—å–Ω—ã—Ö, 3 –º–µ—Å—è—á–Ω—ã—Ö
```

### 5.2. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

#### 5.2.1. –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (backup.sh)

```bash
#!/bin/bash
# backup.sh
# –ü–æ–ª–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

BACKUP_DIR="/–ø—É—Ç—å/–∫/backups/messenger"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_PATH="$BACKUP_DIR/full_backup_$DATE.tar.gz"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p $BACKUP_DIR

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
# cd /–ø—É—Ç—å/–∫/messenger/server
# pkill -f "python main.py"
# sleep 2

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
tar -czf $BACKUP_PATH \
    /–ø—É—Ç—å/–∫/messenger/server/messenger.db \
    /–ø—É—Ç—å/–∫/messenger/server/logs \
    /–ø—É—Ç—å/–∫/messenger/requirements.txt \
    /–ø—É—Ç—å/–∫/messenger/server/*.py \
    /–ø—É—Ç—å/–∫/messenger/client/*.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
if [ -f $BACKUP_PATH ]; then
    echo "‚úì –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞: $BACKUP_PATH" >> /var/log/backup.log
    echo "–†–∞–∑–º–µ—Ä: $(ls -lh $BACKUP_PATH | awk '{print $5}')" >> /var/log/backup.log
    
    # –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
    find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete
else
    echo "‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏!" >> /var/log/backup.log
    exit 1
fi

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏)
# cd /–ø—É—Ç—å/–∫/messenger/server
# nohup python main.py > server.log 2>&1 &
```

#### 5.2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
crontab -e

# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 02:00
0 2 * * * /–ø—É—Ç—å/–∫/messenger/scripts/backup.sh

# –ï–∂–µ—á–∞—Å–Ω–æ–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
0 * * * * /–ø—É—Ç—å/–∫/messenger/scripts/incremental_backup.sh
```

### 5.3. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

#### 5.3.1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
#!/bin/bash
# restore.sh
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

BACKUP_FILE="/–ø—É—Ç—å/–∫/backups/messenger/full_backup_20260101_020000.tar.gz"
RESTORE_DIR="/–ø—É—Ç—å/–∫/messenger"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
cd /–ø—É—Ç—å/–∫/messenger/server
pkill -f "python main.py"
sleep 3

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
tar -czf /tmp/messenger_pre_restore_$(date +%s).tar.gz $RESTORE_DIR

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∞—Ä—Ö–∏–≤–∞
tar -xzf $BACKUP_FILE -C /

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
if [ -f "$RESTORE_DIR/server/messenger.db" ]; then
    echo "‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚úó –û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î"
    exit 1
fi

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd $RESTORE_DIR/server
nohup python main.py > server.log 2>&1 &

echo "‚úì –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑ $BACKUP_FILE"
```

#### 5.3.2. –ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
tar -xzf backup.tar.gz -C /tmp messenger.db
sqlite3 /–ø—É—Ç—å/–∫/messenger/server/messenger.db ".backup /tmp/messenger.db.backup"
cp /tmp/messenger.db /–ø—É—Ç—å/–∫/messenger/server/
```

---

<a name="–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã"></a>
## 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### 6.1. –ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

| –≠—Ç–∞–ø | –î–µ–π—Å—Ç–≤–∏–µ | –í—Ä–µ–º—è | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π |
|------|----------|-------|---------------|
| **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** | –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | 30 –º–∏–Ω | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ | 2 —á–∞—Å–∞ | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ |
| **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ production | 1 —á–∞—Å | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |
| **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ | 30 –º–∏–Ω | –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ |

### 6.2. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 6.2.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏

```bash
#!/bin/bash
# update_server.sh
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

echo "=== –ù–∞—á–∞–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ ==="

# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
/–ø—É—Ç—å/–∫/messenger/scripts/backup.sh

# 2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
cd /–ø—É—Ç—å/–∫/messenger/server
pkill -f "python main.py"
sleep 5

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Git)
cd /–ø—É—Ç—å/–∫/messenger
git pull origin main

# 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
source venv/bin/activate
pip install -r requirements.txt --upgrade

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î (–µ—Å–ª–∏ –µ—Å—Ç—å)
# python -m alembic upgrade head

# 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd server
nohup python main.py > server.log 2>&1 &
sleep 10

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
if curl -s http://localhost:8000/ | grep -q "Local Messenger"; then
    echo "‚úì –°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω"
else
    echo "‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞"
    # –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
    /–ø—É—Ç—å/–∫/messenger/scripts/restore.sh
fi
```

#### 6.2.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏

```powershell
# update_client.ps1 - –¥–ª—è Windows
Write-Host "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞" -ForegroundColor Green

# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
Get-Process python | Where-Object {$_.Path -like "*messenger*"} | Stop-Process -Force

# 2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
Invoke-WebRequest -Uri "https://github.com/.../client.zip" -OutFile "client_new.zip"

# 3. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
Compress-Archive -Path "C:\Program Files\Messenger\*" -DestinationPath "client_backup_$(Get-Date -Format 'yyyyMMdd').zip"

# 4. –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
Expand-Archive -Path "client_new.zip" -DestinationPath "C:\Program Files\Messenger\" -Force

# 5. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
Start-Process "python" -ArgumentList "C:\Program Files\Messenger\client\main.py"
```

### 6.3. –û—Ç–∫–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
#!/bin/bash
# rollback_update.sh
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Å–∏—Å—Ç–µ–º—ã

echo "=== –û—Ç–∫–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ==="

# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
pkill -f "python main.py"

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
LAST_BACKUP=$(ls -t /–ø—É—Ç—å/–∫/backups/messenger/*.tar.gz | head -1)
/–ø—É—Ç—å/–∫/messenger/scripts/restore.sh $LAST_BACKUP

# 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd /–ø—É—Ç—å/–∫/messenger/server
nohup python main.py > server.log 2>&1 &

echo "‚úì –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—á–µ–Ω–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏"
```

---

<a name="—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π"></a>
## 7. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### 7.1. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|----------|---------|---------|-------------|
| **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** | –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç | –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 8000 | –í—ã—Å–æ–∫–∞—è |
| **–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è** | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config.py | –í—ã—Å–æ–∫–∞—è |
| **–°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è** | –û—à–∏–±–∫–∞ –ë–î | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ë–î | –°—Ä–µ–¥–Ω—è—è |
| **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ | –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç | –ù–∏–∑–∫–∞—è |
| **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞** | –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã | –°—Ä–µ–¥–Ω—è—è |

### 7.2. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

#### 7.2.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞
ping SERVER_IP
telnet SERVER_IP 8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
netstat -tuln | grep 8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall –ø—Ä–∞–≤–∏–ª
sudo ufw status  # Ubuntu
netsh advfirewall firewall show rule name=all  # Windows
```

#### 7.2.2. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

```bash
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
grep -i "error\|exception\|fail" server.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞
tail -n 100 server.log

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
grep "$(date '+%Y-%m-%d %H:')" server.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f server.log
```

#### 7.2.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
sqlite3 messenger.db "PRAGMA integrity_check;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
sqlite3 messenger.db "SELECT * FROM pragma_lock_status;"

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
sqlite3 messenger.db "ANALYZE;"
sqlite3 messenger.db "SELECT name FROM sqlite_master WHERE type='table';"
```

### 7.3. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Üí –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ‚Üí –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
     ‚Üì              ‚Üì               ‚Üì                 ‚Üì
   FAQ ‚Üí –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```

---

<a name="–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"></a>
## 8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 8.1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 8.1.1. –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
#!/bin/bash
# security_audit.sh
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

echo "=== –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ $(date) ==="

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
pip list --outdated | grep -E "(fastapi|uvicorn|sqlalchemy|pyjwt)"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
find /–ø—É—Ç—å/–∫/messenger -type f -perm /o=w -ls
find /–ø—É—Ç—å/–∫/messenger -type d -perm /o=w -ls

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–ª–∞–±—ã—Ö –ø–∞—Ä–æ–ª–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î)
sqlite3 messenger.db "SELECT username FROM users WHERE LENGTH(password_hash) < 32;"

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞
grep -i "failed\|invalid\|unauthorized" server.log | tail -20

echo "=== –ê—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à–µ–Ω ==="
```

#### 8.1.2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –≤ production —Å—Ä–µ–¥–µ
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### 8.2. –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ò–Ω—Ü–∏–¥–µ–Ω—Ç | –î–µ–π—Å—Ç–≤–∏—è | –°—Ä–æ–∫ |
|----------|----------|------|
| **–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö** | 1. –ò–∑–æ–ª—è—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã<br>2. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤<br>3. –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π<br>4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | 24 —á–∞—Å–∞ |
| **DDoS –∞—Ç–∞–∫–∞** | 1. –í–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã<br>2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞<br>3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP<br>4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ rate limiting | 1 —á–∞—Å |
| **–í–∑–ª–æ–º –∞–∫–∫–∞—É–Ω—Ç–∞** | 1. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞<br>2. –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è<br>3. –ê–Ω–∞–ª–∏–∑ –¥–µ–π—Å—Ç–≤–∏–π<br>4. –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | 2 —á–∞—Å–∞ |

---

<a name="–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-—Ñ–∞–π–ª—ã"></a>
## 9. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 9.1. –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### 9.1.1. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (server/config.py)

```python
# messenger/server/config.py
import os
from dotenv import load_dotenv

load_dotenv()

class ServerConfig:
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    SECRET_KEY = os.getenv("SECRET_KEY", "dev-secret-key-change-in-production")
    ALGORITHM = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES = 30
    
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    DATABASE_URL = "sqlite:///./messenger.db"
    
    # –°–µ—Ä–≤–µ—Ä
    HOST = os.getenv("SERVER_HOST", "0.0.0.0")
    PORT = int(os.getenv("SERVER_PORT", 8000))
    
    # –õ–∏–º–∏—Ç—ã
    MAX_FILE_SIZE_MB = 5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    MAX_CONNECTIONS = 100  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
    
    # WebSocket
    WEBSOCKET_PING_INTERVAL = 25  # —Å–µ–∫—É–Ω–¥
    WEBSOCKET_PING_TIMEOUT = 20   # —Å–µ–∫—É–Ω–¥
```

#### 9.1.2. –§–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# .env —Ñ–∞–π–ª –¥–ª—è production
SERVER_HOST=192.168.1.100
SERVER_PORT=8000
SECRET_KEY=your-super-secret-key-here-change-me
DATABASE_URL=sqlite:///./messenger_prod.db
DEBUG=false
LOG_LEVEL=INFO
```

### 9.2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### 9.2.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```python
# messenger/client/config.py
class ClientConfig:
    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
    SERVER_HOST = "192.168.1.100"  # IP —Å–µ—Ä–≤–µ—Ä–∞
    SERVER_PORT = 8000
    SERVER_URL = f"http://{SERVER_HOST}:{SERVER_PORT}"
    
    # –¢–∞–π–º–∞—É—Ç—ã
    CONNECT_TIMEOUT = 10  # —Å–µ–∫—É–Ω–¥
    REQUEST_TIMEOUT = 30  # —Å–µ–∫—É–Ω–¥
    
    # –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
    MAX_RETRIES = 3
    RETRY_DELAY = 2  # —Å–µ–∫—É–Ω–¥
    
    # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    UPDATE_INTERVAL = 10  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    MESSAGE_HISTORY_LIMIT = 100  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
```

---

<a name="–ø–æ–ª–µ–∑–Ω—ã–µ-—Å–∫—Ä–∏–ø—Ç—ã"></a>
## 10. –ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 10.1. –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```python
#!/usr/bin/env python3
# diagnose.py
# –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

import sqlite3
import requests
import psutil
import os
from datetime import datetime

def check_database():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    try:
        conn = sqlite3.connect('messenger.db')
        cursor = conn.cursor()
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table';")
        tables = cursor.fetchall()
        
        print("‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞")
        print(f"  –¢–∞–±–ª–∏—Ü—ã: {[t[0] for t in tables]}")
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        cursor.execute("SELECT COUNT(*) FROM users")
        users = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM messages")
        messages = cursor.fetchone()[0]
        
        print(f"  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {users}")
        print(f"  –°–æ–æ–±—â–µ–Ω–∏–π: {messages}")
        
        conn.close()
        return True
    except Exception as e:
        print(f"‚úó –û—à–∏–±–∫–∞ –ë–î: {e}")
        return False

def check_server():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"""
    try:
        response = requests.get('http://localhost:8000/', timeout=5)
        if response.status_code == 200:
            print("‚úì –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç")
            return True
        else:
            print(f"‚úó –°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –∫–æ–¥: {response.status_code}")
            return False
    except Exception as e:
        print(f"‚úó –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {e}")
        return False

def check_resources():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã"""
    print("\nüìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:")
    
    # CPU
    cpu_percent = psutil.cpu_percent(interval=1)
    print(f"  CPU: {cpu_percent}%")
    
    # –ü–∞–º—è—Ç—å
    memory = psutil.virtual_memory()
    print(f"  –ü–∞–º—è—Ç—å: {memory.percent}%")
    
    # –î–∏—Å–∫
    disk = psutil.disk_usage('/')
    print(f"  –î–∏—Å–∫: {disk.percent}%")
    
    return cpu_percent < 90 and memory.percent < 90 and disk.percent < 90

if __name__ == "__main__":
    print(f"=== –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã {datetime.now()} ===")
    
    db_ok = check_database()
    server_ok = check_server()
    resources_ok = check_resources()
    
    if all([db_ok, server_ok, resources_ok]):
        print("\n‚úÖ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ")
    else:
        print("\n‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏")
```

### 10.2. –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–∏—Å—Ç–µ–º—ã

```bash
#!/bin/bash
# cleanup.sh
# –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

echo "–û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞"

# 1. –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
find /–ø—É—Ç—å/–∫/messenger -name "*.log" -mtime +30 -delete
echo "‚úì –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏"

# 2. –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Python
find /–ø—É—Ç—å/–∫/messenger -name "__pycache__" -type d -exec rm -rf {} +
find /–ø—É—Ç—å/–∫/messenger -name "*.pyc" -delete
echo "‚úì –û—á–∏—â–µ–Ω Python –∫—ç—à"

# 3. –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
find /–ø—É—Ç—å/–∫/messenger -name "*.tmp" -delete
find /–ø—É—Ç—å/–∫/messenger -name "*.temp" -delete
echo "‚úì –£–¥–∞–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"

# 4. –°–∂–∞—Ç–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sqlite3 /–ø—É—Ç—å/–∫/messenger/server/messenger.db "VACUUM;"
echo "‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"

echo "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
```

---

<a name="–∫–æ–Ω—Ç–∞–∫—Ç—ã-–¥–ª—è-–ø–æ–¥–¥–µ—Ä–∂–∫–∏"></a>
## 11. –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### 11.1. –ö–æ–º–∞–Ω–¥–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è

| –†–æ–ª—å | –§–ò–û | –ö–æ–Ω—Ç–∞–∫—Ç—ã | –ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã |
|------|-----|----------|-------------|
| **–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** | –ú–∞–ª–∏–Ω–µ–≤—Å–∫–∏–π –ï–≥–æ—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á | egorm@edu.ru | –ü–Ω-–ü—Ç 9:00-18:00 |
| **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫** | –ö—É—Ä–Ω–æ—Å–µ–Ω–∫–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á | alexk@edu.ru | –ü–æ –∑–∞–ø—Ä–æ—Å—É |
| **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** | –õ–∞—Ä–µ—Ç–∏–Ω–∞ –î–∞—Ä—å—è –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞ | daria@edu.ru | –ü–Ω-–ü—Ç 10:00-17:00 |

### 11.2. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Üí –§–æ—Ä–º–∞ –Ω–∞ —Å–∞–π—Ç–µ / Email / –¢–µ–ª–µ—Ñ–æ–Ω
2. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞—è–≤–∫–∏ (—Ç–∏–∫–µ—Ç)
3. **–ê–Ω–∞–ª–∏–∑** ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã
4. **–†–µ—à–µ–Ω–∏–µ** ‚Üí –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –ó–∞–∫—Ä—ã—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞

### 11.3. –®–∞–±–ª–æ–Ω –∑–∞—è–≤–∫–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

```
–¢–µ–º–∞: [–ü–†–û–ë–õ–ï–ú–ê] - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?
2. –ö–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ?
3. –ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏?
4. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?
5. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ:
- –û–°: [Windows/Linux/Mac]
- –í–µ—Ä—Å–∏—è –∫–ª–∏–µ–Ω—Ç–∞: [–≤–µ—Ä—Å–∏—è]
- IP —Å–µ—Ä–≤–µ—Ä–∞: [–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ]
- –í—Ä–µ–º—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è: [–¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è]

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π)
```

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –ß–µ–∫-–ª–∏—Å—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

```
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ API
[ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ)
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –ß–µ–∫-–ª–∏—Å—Ç –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

```
[ ] –ü–æ–ª–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
[ ] –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
[ ] –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
[ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î